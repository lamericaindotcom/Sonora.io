<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Knobs & Wave Selector Style Pigments</title>
<style>
  body {
    background: #1a1a1c;
    color: #eee;
    font-family: 'Roboto', sans-serif;
    padding: 30px;
  }
  
  /* === Knob style === */
  .knob {
    width: 70px;
    height: 70px;
    background: radial-gradient(circle at 30% 30%, #444, #111);
    border-radius: 50%;
    box-shadow:
      inset 0 8px 10px rgba(255,255,255,0.15),
      inset 0 -8px 12px rgba(0,0,0,0.8),
      0 4px 8px rgba(0,0,0,0.7);
    position: relative;
    cursor: pointer;
    transition: filter 0.2s ease, box-shadow 0.2s ease;
    margin: 0 auto 20px;
    display: block;
  }

  .knob::before {
    content: '';
    position: absolute;
    top: 8px;
    left: 50%;
    transform-origin: center bottom;
    transform: translateX(-50%) rotate(var(--rotation, 0deg));
    width: 6px;
    height: 12px;
    border-radius: 3px;
    background: linear-gradient(180deg, #ffa64d, #ff6f00);
    box-shadow:
      0 0 5px 2px rgba(255, 166, 77, 0.8),
      inset 0 2px 4px rgba(255, 255, 255, 0.7);
  }

  .knob:hover {
    filter: brightness(1.3);
    box-shadow:
      inset 0 10px 14px rgba(255,255,255,0.3),
      inset 0 -10px 16px rgba(0,0,0,0.9),
      0 6px 12px rgba(0,0,0,0.9),
      0 0 20px 4px rgba(255, 140, 0, 0.75);
  }

  /* Label under knob */
  .knob-label {
    text-align: center;
    font-size: 0.85rem;
    opacity: 0.8;
    margin-top: -12px;
    margin-bottom: 20px;
  }

  /* === Radio button style === */
  .radio-group {
    display: flex;
    gap: 20px;
    margin-top: 10px;
  }

  .radio-group input[type="radio"] {
    position: absolute;
    opacity: 0;
    width: 0;
    height: 0;
  }

  .radio-group label {
    position: relative;
    padding-left: 30px;
    cursor: pointer;
    font-weight: 600;
    font-size: 1rem;
    color: #eee;
    user-select: none;
  }

  .radio-group label::before {
    content: "";
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    height: 20px;
    width: 20px;
    border-radius: 50%;
    background: #222;
    border: 2px solid #ff7a1a;
    box-shadow: inset 0 2px 5px rgba(255, 122, 26, 0.8);
    transition: background 0.3s, box-shadow 0.3s;
  }

  .radio-group input[type="radio"]:checked + label::before {
    background: radial-gradient(circle at center, #ff7a1a 40%, #ffbb66 100%);
    box-shadow:
      0 0 8px 2px rgba(255, 122, 26, 0.9),
      inset 0 0 6px rgba(255, 255, 255, 0.6);
  }

  .radio-group label:hover::before {
    box-shadow:
      0 0 5px 1px rgba(255, 122, 26, 0.7),
      inset 0 2px 6px rgba(255, 140, 26, 0.8);
  }

</style>
</head>
<body>

<h2>Knobs et Sélecteur d'onde - Style Pigments</h2>

<div>
  <canvas class="knob" id="knobVolume"></canvas>
  <div class="knob-label">Volume</div>
</div>

<div>
  <canvas class="knob" id="knobCutoff"></canvas>
  <div class="knob-label">Cutoff</div>
</div>

<div class="radio-group">
  <input type="radio" id="sine" name="wave" value="sine" checked>
  <label for="sine">Sine</label>

  <input type="radio" id="square" name="wave" value="square">
  <label for="square">Square</label>

  <input type="radio" id="sawtooth" name="wave" value="sawtooth">
  <label for="sawtooth">Saw</label>

  <input type="radio" id="triangle" name="wave" value="triangle">
  <label for="triangle">Triangle</label>
</div>

<script>
// Fonction pour appliquer la rotation sur un canvas représentant un knob
function drawKnobRotation(canvas, degrees) {
  const ctx = canvas.getContext('2d');
  const size = canvas.width;
  ctx.clearRect(0, 0, size, size);

  // Dessin du cercle avec dégradé radial
  const gradient = ctx.createRadialGradient(size*0.3, size*0.3, size*0.1, size/2, size/2, size/2);
  gradient.addColorStop(0, '#444');
  gradient.addColorStop(1, '#111');

  ctx.fillStyle = gradient;
  ctx.beginPath();
  ctx.arc(size/2, size/2, size/2 - 5, 0, 2*Math.PI);
  ctx.fill();

  // Ombres intérieures
  ctx.shadowColor = 'rgba(255,255,255,0.2)';
  ctx.shadowBlur = 10;
  ctx.shadowOffsetX = 0;
  ctx.shadowOffsetY = 0;
  ctx.fill();

  // Effacer ombrages trop forts
  ctx.shadowColor = 'transparent';

  // Indicateur lumineux (aiguille)
  ctx.save();
  ctx.translate(size/2, size/2);
  ctx.rotate(degrees * Math.PI / 180);
  const needleGradient = ctx.createLinearGradient(0, 0, 0, -size/4);
  needleGradient.addColorStop(0, '#ffa64d');
  needleGradient.addColorStop(1, '#ff6f00');
  ctx.fillStyle = needleGradient;
  ctx.beginPath();
  ctx.moveTo(-3, 0);
  ctx.lineTo(3, 0);
  ctx.lineTo(0, -size/4);
  ctx.closePath();
  ctx.fill();
  ctx.restore();
}

// Initialisation des knobs avec rotation selon valeur (0 à 1)
function initKnob(canvasId, initialValue) {
  const canvas = document.getElementById(canvasId);
  canvas.width = 70;
  canvas.height = 70;
  let value = initialValue;

  // Convertir valeur (0-1) en degrés -135 à +135
  function valueToDegrees(v) {
    return (v * 270) - 135;
  }

  function draw() {
    drawKnobRotation(canvas, valueToDegrees(value));
  }

  draw();

  // Exemple d'animation simple (oscille la valeur)
  let direction = 1;
  setInterval(() => {
    value += 0.01 * direction;
    if (value > 1) direction = -1;
    else if (value < 0) direction = 1;
    draw();
  }, 30);

  return {
    setValue(v) {
      value = Math.min(Math.max(v, 0), 1);
      draw();
    }
  };
}

// Démarrage
const knobVolume = initKnob('knobVolume', 0.5);
const knobCutoff = initKnob('knobCutoff', 0.7);

</script>

</body>
</html>
